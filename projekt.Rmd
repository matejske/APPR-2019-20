---
title: "Analiza okoljske ozaveščenosti evropskih držav"
author: "Matej Škerlep"
output:
  html_document: default
  pdf_document:
    includes:
      in_header: lib/styles.sty
    latex_engine: xelatex
runtime: shiny
---

```{r setup, echo=FALSE, results='hide', message=FALSE, warning=FALSE}
# Če želimo nastaviti pisave v PDF-ju, odkomentiramo
# in sledimo navodilom v programu.
#source("fontconfig.r", encoding="UTF-8")

# Uvoz vseh potrebnih knjižnic
source("lib/libraries.r", encoding="UTF-8")
```

```{r rstudio, echo=FALSE, results='asis'}
# Izris povezave do RStudia na Binderju
source("lib/rstudio.r", encoding="UTF-8")
```

# Uvod

Analiziral sem podatke o okoljski ozaveščenosti evropskih držav. Za merilo ozaveščanosti sem izbral izdatke posamezne države za ekologijo, izmerjene vrednosti emisij treh najbolj škodljivih toplogrednih plinov in pobrane davke s strani ekoloških dajatev. Zgoraj omenjene podatke sem primerjal z BDP-jem, številom prebivalcev in konsolidiranim državnim dolgom. Analiziral sem, ali obstaja korelacija med BDP-jem na prebivalca in vrednostmi emisij, kateri sektorji gospodarstva so največji onasneževalci okolja, ... 

![](slike/tovarna.jpg)

***

# Obdelava, uvoz in čiščenje podatkov

```{r uvoz, echo=FALSE, message=FALSE}
source("uvoz/uvoz.r", encoding="UTF-8")
```

Podatke sem uvozil v obliki CSV, ki sem jih pridobil v podatkovnih bazah Eurostat.
Sprva so bili podatki v šestih tabelah, ki sem jih uredil v šest razpredelnic v obliki *tidy data*.

1. `bdp` - podatki o bruto domačem proizvodu (BDP) držav Evropske unije (1998-2017)
  - `Drzava` - - spremenljivka: imena opazovanih držav, (neurejen faktor)
  - `Leto` - spremenljivka: leto testiranja, (število)
  - `BDP.E` - meritev: BDP v tekočih cenah v milijonih evrov, (število)
  
2. `emisije` - letne meritve  treh najškodljivejših toplogrednih plinov v ozračju po sektorjih gospodarstva 
  - `Drzava` - spremenljivka: imena opazovanih držav, (neurejen faktor)
  - `Leto` - spremenljivka: leto testiranja, (število)
  - `Merjen.plin` - spremelnjivka: vrsta plina (Carbon dioxide, Carbon dioxide, Nitrous oxide), (neurejen faktor)
  - `Sector.gospodarstva` - spremenljivka: sektor gospodarstva, ki je v zrak izpustil določeno količino plina, (neurejen faktor)
  - `Izpuscene.emisije` - meritev: letna izmerjena količina v tonah, (število)

3. `dolg` - konsolidirani državni dolg Konsolidirani državni dolg (1998-2017)
  - `Drzava` - spremenljivka: imena opazovanih držav, (neurejen faktor)
  - `Leto` - spremenljivka: leto testiranja, (število)
  - `Dolg` - meritev: vrednost dolga v milijonih evrov, (število)

4. `eko.potrosnja` - letni državni izdatki za ekologijo (1998-2017)
  - `Drzava` - spremenljivka: imena opazovanih držav, (neurejen faktor)
  - `Leto` - spremenljivka: leto testiranja, (število)
  - `Izdatki.za.ekologijio` - meritev: izdatki (potrošnja) držav za ekologijo v milijonih evrov, (število)
  
5. `populacija` - število prebivalcev držav Evropske unije (1998-2017)
  - `Drzava` - spremenljivka: imena opazovanih držav, (neurejen faktor)
  - `Leto` - spremenljivka: leto testiranja, (število)
  - `Stevilo.prebivalcev` - meritev: število prebivalcev, (število)

6. `eko.davki` - letni državni prihodki s strani ekoloških davkov za podjetja in posameznike
  - `Drzava` - spremenljivka: imena opazovanih držav, (neurejen faktor)
  - `Leto` - spremenljivka: leto testiranja, (število)
  - `Pobrani.davki` - meritev: vrednost pobranih ekoloških davkov v milijonih evrov, (število)



## Tu spodaj bom izrisal uvodne grafe:

```{r vizualizacija, echo=FALSE, message=FALSE, results='hide', warning=FALSE}
source('vizualizacija/vizualizacija.r', encoding = 'UTF-8')
```


### Uvodni tekst
```{r graf.emisije.slo, echo=FALSE, message=FALSE, error=FALSE, warning=FALSE, fig.align='center', fig.height=7, fig.cap='Caption'}
plot(graf.emisije.slo)
```

```{r graf.davki.slo, echo=FALSE, message=FALSE, error=FALSE, warning=FALSE, fig.align='center', fig.height=7, fig.cap='CAption'}
plot(graf.davki.slo)
```





***

# Analiza in vizualizacija podatkov

```{r zemljevid.bdp.2016, echo=FALSE, message=FALSE, error=FALSE, warning=FALSE, fig.align='center', fig.height=7, fig.cap='CAption'}
plot(zemljevid.bdp.2016)
```

```{r zemljevid.izdatki.v.bdp.2016, echo=FALSE, message=FALSE, error=FALSE, warning=FALSE, fig.align='center', fig.height=7, fig.cap='CAption'}
plot(zemljevid.izdatki.v.bdp.2016)
```

## Spodnjega plotlyja mi ne izriše
```{r plotly.graf2, echo=FALSE, message=FALSE, error=FALSE, warning=FALSE, fig.align='center', fig.height=7, fig.cap='CAption'}
print(plotly.graf2)
```

```{r zemljevid_cluster, echo=FALSE, message=FALSE, error=FALSE, warning=FALSE, fig.align='center', fig.height=7, fig.cap='CAption'}
plot(zemljevid_cluster)
```




***

# Napredna analiza podatkov

```{r analiza, echo=FALSE, message=FALSE}
source("analiza/analiza.r", encoding="UTF-8")
```

```{r graf.napovedi.praga.slo, echo=FALSE, fig.align='center', fig.cap='Caption'}
plot(graf.napovedi.praga.slo)
```

```{r graf.napovedi.praga.nem, echo=FALSE, fig.align='center', fig.cap='Caption'}
plot(graf.napovedi.praga.nem)
```

***
# Shiny

```{r shiny, echo=FALSE}
shinyAppDir("shiny", options=list(width="100%", height=600))
```
